import React, { useEffect } from 'react'
import { useDispatch, useSelector } from 'react-redux'
import { useParams } from 'react-router-dom'
import { getPostBySlug } from '@/features/postSlice'
import SimilarBlogs from '../components/SimilarBlogs'
import Navigation from '../components/Navigation';

const ShowSpecificBlog = () => {
  const dispatch = useDispatch()
  const { slug } = useParams()
  const { currentPost, isFetching, error } = useSelector((state) => state.post)

  useEffect(() => {
    if (slug) {
      dispatch(getPostBySlug(slug))
    }
  }, [dispatch, slug])

  if (isFetching) {
    return (
      <div className="min-h-screen bg-gray-50 flex items-center justify-center">
        <div className="text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
          <p className="text-gray-600">Loading post...</p>
        </div>
      </div>
    )
  }

  if (error || !currentPost) {
    return (
      <div className="min-h-screen bg-gray-50 flex items-center justify-center">
        <div className="text-center">
          <h2 className="text-2xl font-bold text-gray-900 mb-2">Post not found</h2>
          <p className="text-gray-600">The post you're looking for does not exist.</p>
        </div>
      </div>
    )
  }

  const post = currentPost

  return (
    <div className="min-h-screen bg-gray-50">
      <Navigation />
      <div className="container mx-auto mt-[73px] px-4 py-8 flex flex-col items-center min-w-[100vw] bg-blue-100">
        {/* Header Image */}
        <div className='w-[1300px] border '>
          <div></div>
        </div>
        <div className="mb-6">
          <img
            src={post.mainImage}
            alt={post.title}
            className="w-full h-72 object-cover rounded-lg shadow-md"
            onError={(e) => {
              e.target.src = 'https://via.placeholder.com/800x400?text=No+Image'
            }}
          />
        </div>

        {/* Title and Meta */}
        <h1 className="text-4xl font-extrabold text-gray-900 mb-2">{post.title}</h1>
        <p className="text-lg text-gray-600 mb-4">{post.subTitle}</p>
        <div className="flex items-center gap-3 text-sm text-gray-500 mb-8">
          <span>{new Date(post.createdAt).toLocaleDateString()}</span>
          {post.category?.length > 0 && (
            <span className="flex gap-2">
              {post.category.map((c, i) => (
                <span
                  key={i}
                  className="px-2 py-0.5 rounded-full bg-blue-100 text-blue-800 text-xs"
                >
                  {c}
                </span>
              ))}
            </span>
          )}
        </div>

        {/* Content (HTML) with Tailwind Typography */}
        {post.contentHTML ? (
          <div className="prose prose-lg prose-blue max-w-none dark:prose-invert">
            <div dangerouslySetInnerHTML={{ __html: post.contentHTML }} />
          </div>
        ) : (
          <pre className="bg-gray-100 p-4 rounded text-sm overflow-auto">
            {JSON.stringify(post.content, null, 2)}
          </pre>
        )}
      </div>

      {/* Similar Blogs Section */}
      <SimilarBlogs />
    </div>
  )
}

export default ShowSpecificBlog








<section className="w-[1300px]  mx-auto flex flex-col md:flex-row items-center justify-center gap-10 max-md:px-4">
        {/* Image Section */}
        <div className="relative  mb-20  shadow-2xl shadow-blue-600/40 rounded-2xl overflow-hidden shrink-0">
          <img className="max-w-md w-full object-cover rounded-2xl"
            src="https://images.unsplash.com/photo-1531497865144-0464ef8fb9a9?q=80&w=451&h=451&auto=format&fit=crop"
            alt="Kloudshark team working on content" />
          <div className="flex items-center gap-1 max-w-72 absolute bottom-8 left-8 bg-white p-4 rounded-xl">
            <div className="flex -space-x-4 shrink-0">
              {/* You might want to replace these with generic user icons or remove if not relevant */}
              <img src="https://images.unsplash.com/photo-1633332755192-727a05c4013d?q=80&w=200" alt="team member 1"
                className="size-9 rounded-full border-[3px] border-white hover:-translate-y-1 transition z-1" />
              <img src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?q=80&w=200" alt="team member 2"
                className="size-9 rounded-full border-[3px] border-white hover:-translate-y-1 transition z-[2]" />
              <img src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?q=80&w=200&h=200&auto=format&fit=crop"
                alt="team member 3"
                className="size-9 rounded-full border-[3px] border-white hover:-translate-y-1 transition z-[3]" />
              <div
                className="flex items-center justify-center text-xs text-white size-9 rounded-full border-[3px] border-white bg-blue-600 hover:-translate-y-1 transition z-[4]">
                50+
              </div>
            </div>
            <p className="text-sm font-medium text-slate-800">Our growing reader community</p> {/* Changed text */}
          </div>
        </div>

        {/* Text Content Section */}
        <div className="text-sm  -mt-24 text-slate-600 max-w-lg">
          <h2 className="text-xl uppercase font-semibold text-slate-700">Our Mission</h2> {/* Changed to h2 */}
          <div className="w-24 h-[3px] rounded-full bg-gradient-to-r from-blue-600 to-[#D9E6FF]"></div> {/* Adjusted gradient color */}
          <p className="mt-8">
            At Kloudshark, we believe in the power of knowledge to inform, inspire, and foster growth. Our platform is dedicated to providing high-quality, thoroughly researched articles across a spectrum of tech-related topics, lifestyle, and educational content.
          </p>
          <p className="mt-4">
            Our team of expert writers and administrators carefully crafts each piece, ensuring accuracy, relevance, and engaging narratives. We strive to be your go-to source for understanding complex concepts, discovering new trends, and gaining valuable insights.
          </p>
          <p className="mt-4">
            While only our dedicated administrators publish content, our ultimate goal is to empower our readers with the information they need to stay ahead, learn something new, or simply enjoy a well-written story.
          </p>
          <button className="flex items-center gap-2 mt-8 hover:-translate-y-0.5 transition bg-gradient-to-r from-blue-600 to-[#60A5FA] py-3 px-8 rounded-full text-white"> {/* Adjusted gradient color */}
            <span>Explore Articles</span> {/* Changed button text */}
            <svg width="13" height="12" viewBox="0 0 13 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M12.53 6.53a.75.75 0 0 0 0-1.06L7.757.697a.75.75 0 1 0-1.06 1.06L10.939 6l-4.242 4.243a.75.75 0 0 0 1.06 1.06zM0 6v.75h12v-1.5H0z"
                fill="#fff" />
            </svg>
          </button>
        </div>
      </section>